<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Admin - Car Rental</title>

    <!-- Correct paths using url_for to serve static files -->
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800&amp;display=swap">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/swiper-icons.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='fonts/font-awesome.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Filter.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Hero-Features-icons.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.5.0/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.2/css/theme.bootstrap_4.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Ludens---Index-v2-with-Backend--Frontend-Filters.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Projects-Grid-images.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Simple-Slider-swiper-bundle.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Simple-Slider.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Tamplate-SB-Admin-on-BSS.css') }}">
</head>

<body>
    <div class="modal fade" id="generateReportModal" tabindex="-1" aria-labelledby="generateReportModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="generateReportModalLabel">Generate Report</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form id="generateReportForm">
                <!-- Start Date -->
                <div class="mb-3">
                  <label for="start_date" class="form-label">Start Date:</label>
                  <input
                    type="date"
                    id="start_date"
                    name="start_date"
                    class="form-control"
                    onchange="validateDateRange()"
                  />
                </div>
      
                <!-- End Date -->
                <div class="mb-3">
                  <label for="end_date" class="form-label">End Date:</label>
                  <input
                    type="date"
                    id="end_date"
                    name="end_date"
                    class="form-control"
                    onchange="validateDateRange()"
                  />
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
              <button type="button" id="generateReportButton" class="btn btn-primary" disabled onclick="submitReport()">Generate Report</button>
            </div>
          </div>
        </div>
      </div>
      
      <script>
        // Enable the Generate Report button only if both dates are selected
        function validateDateRange() {
          const startDate = document.getElementById('start_date').value;
          const endDate = document.getElementById('end_date').value;
          const generateButton = document.getElementById('generateReportButton');
      
          if (startDate && endDate) {
            generateButton.disabled = false;
          } else {
            generateButton.disabled = true;
          }
        }
      
        // Submit the report request to the Flask backend
        function submitReport() {
          const startDate = document.getElementById('start_date').value;
          const endDate = document.getElementById('end_date').value;
      
          if (startDate && endDate) {
            // Create a FormData object with the date range
            const formData = new FormData();
            formData.append('startDate', startDate);
            formData.append('endDate', endDate);
      
            // Send the payload to the Flask backend using fetch
            fetch('/generate_report', {
              method: 'POST', // Adjust the method to POST
              body: formData, // Use FormData for compatibility with Flask
            })
              .then((response) => {
                if (response.ok) {
                  return response.blob(); // Expect a PDF file as the response
                } else {
                  throw new Error('Failed to generate the report');
                }
              })
              .then((blob) => {
                // Create a URL for the blob and initiate the download
                const url = window.URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `report_${startDate}_to_${endDate}.pdf`;
                document.body.appendChild(link);
                link.click();
                link.remove();
                window.URL.revokeObjectURL(url);
              })
              .catch((error) => {
                alert(`Error: ${error.message}`);
              });
          }
        }
      </script>
    <nav class="navbar navbar-expand-md sticky-top navbar-shrink py-3" id="mainNav">
		<div class="container"><a class="navbar-brand d-flex align-items-center" href="/products"><span class="bs-icon-lg bs-icon-circle bs-icon-primary shadow d-flex justify-content-center align-items-center me-2 bs-icon" style="background: #A599B5;"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-car-suv">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
              <path d="M5 17a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"></path>
              <path d="M16 17a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"></path>
              <path d="M5 9l2 -4h7.438a2 2 0 0 1 1.94 1.515l.622 2.485h3a2 2 0 0 1 2 2v3"></path>
              <path d="M10 9v-4"></path>
              <path d="M2 7v4"></path>
              <path d="M22.001 14.001a4.992 4.992 0 0 0 -4.001 -2.001a4.992 4.992 0 0 0 -4 2h-3a4.998 4.998 0 0 0 -8.003 .003"></path>
              <path d="M5 12v-3h13"></path>
          </svg></span><span style="font-size: 40px;font-weight: bold;text-align: center;--bs-dark: #2e2f2f;--bs-dark-rgb: 46,47,47;">Car Rental Service</span></a>
			<button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
			<div class="collapse navbar-collapse" id="navcol-1">
				<ul class="navbar-nav mx-auto">
					<li class="nav-item"></li>
					<li class="nav-item"></li>
					<li class="nav-item"></li>
					<li class="nav-item"></li>
				</ul>
				<a class="btn btn-secondary shadow" role="button" id="cartbutton" style="--bs-primary: #A599B5;--bs-primary-rgb: 165,153,181;--bs-secondary: #ACBDBA;--bs-secondary-rgb: 172,189,186;background: #acbdba;border-style: none;margin-right: 10px;" href="/cart">
					<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-cart-fill">
						<path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"></path>
					</svg>
				</a>
				{{ admin }}
				<a href="/pickupdropoff">
					<button class="btn btn-primary shadow" type="button" style="margin-right: 10px;">Pickup / Drop Off</button>
				</a>
				<a href="/logout">
					<button class="btn btn-danger shadow" type="button">Logout</button>
				</a>
			</div>
		</div>
	</nav>
    <section>
        <div class="py-5">
            <nav class="navbar navbar-expand bg-dark sb-topnav navbar-dark" style="margin-top: -2%;">
                <div class="container-fluid"><button class="btn btn-link btn-sm link-light order-md-1" id="sidebarToggle" type="button"></button><p style="color: #fff;font-size: 2rem;cursor: default;">CRS-ADMIN Portal</p>

                </div>
                </nav>
                <div id="layoutSidenav">
                    <div id="layoutSidenav_nav">
                        <div id="sidenavAccordion" class="sb-sidenav accordion sb-sidenav-dark">
                            <div class="sb-sidenav-menu">
                                <div class="nav">
                                    <div></div>
                                    <div>
                                        <div class="sb-sidenav-menu-heading" style="cursor: default;"><span>admin options</span></div>
                                        <!-- Customer Management Accordion Button -->
                                        <a class="nav-link collapsed" href="#" aria-expanded="false" aria-controls="Customercollapse" data-bs-toggle="collapse" data-bs-target="#Customercollapse">
                                            <div class="sb-nav-link-icon" style="cursor: default;"><i class="fa fa-gear"></i></div><span>Employee Management</span>
                                            <div class="sb-sidenav-collapse-arrow"><i class="fa fa-angle-down"></i></div>
                                        </a>
                                        <div id="Customercollapse" class="collapse" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordion">
                                            <div class="sb-sidenav-menu-nested nav">
                                                <a class="nav-link" id="createCustomer" href="#">Create New Employee</a>
                                                <a class="nav-link" id="modifyCustomer" href="#">Modify Existing</a>
                                                <a class="nav-link" id="deleteCustomer" href="#">Delete Employee</a>
                                            </div>
                                        </div>
                                        <a class="nav-link collapsed" href="#" aria-expanded="false" aria-controls="collapseLayouts" data-bs-toggle="collapse" data-bs-target="#collapseLayouts">
                                            <div class="sb-nav-link-icon" style="cursor: default;"><i class="fa fa-gear"></i></div><span>Vehicle Management</span>
                                            <div class="sb-sidenav-collapse-arrow"><i class="fa fa-angle-down"></i></div>
                                        </a>
                                        <div id="collapseLayouts" class="collapse" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordion">
                                            <div class="sb-sidenav-menu-nested nav">
                                                <a class="nav-link" id="createCar" href="#">Create New Vehicle</a>
                                                <a class="nav-link" id="modifyCar" href="#">Modify Existing</a>
                                                <a class="nav-link" id="deleteCar" href="#">Delete Vehicle</a>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Generate Report Button -->
                                    <a class="nav-link" type="button" style="none" data-bs-target="#generateReportModal" type="button" data-bs-toggle="modal">
                                        <div class="sb-nav-link-icon"><i class="fa fa-file-text"></i></div><span>Generate Report</span>
                                    </a>
                                </div>
                            </div>
                            <div class="sb-sidenav-footer">
                                <div class="small"><span>Logged as : {{ Username }}</span></div>
                            </div>
                        </div>
                    </div>
                    <div id="layoutSidenav_content" style="margin-left: 25px; margin-top: 25px; cursor: default; padding: 0px 6% 0px;" >
                        <main id="customerDataContent">
                        <h2><strong>Welcome to the Admin Panel</strong></h2>
                        <p>Select an option from the sidebar to manage customer accounts.</p>
                    </main><script>
                        // Listen for clicks on "Create New Customer"
                        document.getElementById('createCustomer').addEventListener('click', function() {
                            document.getElementById('customerDataContent').innerHTML = `
                                <form id="createCustomerForm">
                                    <h3>Create New Employee</h3>

                                    <!-- Name -->
                                    <div class="mb-3">
                                        <label for="customerName" class="form-label">Name</label>
                                        <input type="text" class="form-control" id="customerName" placeholder="Enter employee name" >
                                    </div>

                                    <!-- Address -->
                                    <div class="mb-3">
                                        <label for="customerAddress" class="form-label">Address</label>
                                        <input type="text" class="form-control" id="customerAddress" placeholder="Enter employee address" >
                                    </div>

                                    <!-- Phone -->
                                    <div class="mb-3">
                                        <label for="customerPhone" class="form-label">Phone</label>
                                        <input type="tel" class="form-control" id="customerPhone" placeholder="Enter employee phone number" >
                                    </div>

                                    <!-- Email -->
                                    <div class="mb-3">
                                        <label for="customerEmail" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="customerEmail" placeholder="Enter employee email" >
                                    </div>

                                    <!-- Age -->
                                    <div class="mb-3">
                                        <label for="customerAge" class="form-label">Age</label>
                                        <input type="number" class="form-control" id="customerAge" placeholder="Enter employee age" >
                                    </div>

                                    <!-- Gender -->
                                    <div class="mb-3">
                                        <label for="customerGender" class="form-label">Gender</label>
                                        <select class="form-select" id="customerGender" >
                                            <option value="" disabled selected>Select gender</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>

                                    <!-- Insurance Company -->
                                    <div class="mb-3">
                                        <label for="insuranceCompany" class="form-label">Insurance Company</label>
                                        <input type="text" class="form-control" id="insuranceCompany" placeholder="Enter insurance company" >
                                    </div>

                                    <!-- User Photo -->
                                    <div class="mb-3">
                                        <label for="userPhoto" class="form-label">DL Photo</label>
                                        <input type="file" class="form-control" id="userPhoto" accept="image/*" >
                                    </div>

                                    <button type="submit" class="btn btn-primary">Create employee</button>
                                </form>
                            `;

                        // Add event listener for form submission
                            document.getElementById('createCustomerForm').addEventListener('submit', function(event) {
                                event.preventDefault();  // Prevent default form submission

                                // Collect form data
                                const customerData = new FormData();
                                customerData.append('name', document.getElementById('customerName').value);
                                customerData.append('address', document.getElementById('customerAddress').value);
                                customerData.append('phone', document.getElementById('customerPhone').value);
                                customerData.append('email', document.getElementById('customerEmail').value);
                                customerData.append('age', document.getElementById('customerAge').value);
                                customerData.append('gender', document.getElementById('customerGender').value);
                                customerData.append('insurance_company', document.getElementById('insuranceCompany').value);
                                customerData.append('photo', document.getElementById('userPhoto').files[0]);

                                // Validate the form (ensure no field is empty)
                                if (!customerData.get('name') || !customerData.get('address') || !customerData.get('phone') ||
                                    !customerData.get('email') || !customerData.get('age') || !customerData.get('gender') ||
                                    !customerData.get('insurance_company') || !customerData.get('photo')) {
                                    // Show the error modal if validation fails
                                    showErrorModal('Error: All fields must be completed to modify successfully.');
                                    return;  // Prevent submission if validation fails
                                }
                                // Send the form data to the Flask backend using fetch with FormData
                                fetch('/create_customer', {
                                    method: 'POST',
                                    body: customerData  // Send the FormData object with the file included
                                })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.message) {
                                        alert(data.message);  // Show success message
                                        // Reset form after successful submission
                                        document.getElementById('createCustomerForm').reset();
                                    } else {
                                        alert('Error: ' + data.error);  // Show error message
                                    }
                                })
                                .catch(error => {
                                    console.error('Error:', error);
                                    alert('There was an error creating the customer.');
                                });
                            });
                        });


                         // Listen for clicks on "Modify Customer Data"
                        document.getElementById('modifyCustomer').addEventListener('click', function() {
                            document.getElementById('customerDataContent').innerHTML = `
                                <form id="modifyCustomerForm" style="margin-bottom: 75px;">
                                    <h3>Modify Employee Data</h3>

                                    <!-- Customer ID (Input for searching) -->
                                    <div class="mb-3">
                                        <label for="userIDInput" class="form-label">Employee ID</label>
                                        <input type="text" class="form-control" id="userIDInput" placeholder="Enter employee ID" >
                                        <button type="button" id="fetchCustomerBtn" class="btn btn-primary mt-3">Fetch Employee Data</button>
                                    </div>

                                    <!-- Name -->
                                    <div class="mb-3">
                                        <label for="customerName" class="form-label">Name</label>
                                        <input type="text" class="form-control" id="customerName" placeholder="Enter employee name" required disabled>
                                    </div>

                                    <!-- Address -->
                                    <div class="mb-3">
                                        <label for="customerAddress" class="form-label">Address</label>
                                        <input type="text" class="form-control" id="customerAddress" placeholder="Enter employee address" >
                                    </div>

                                    <!-- Phone -->
                                    <div class="mb-3">
                                        <label for="customerPhone" class="form-label">Phone</label>
                                        <input type="tel" class="form-control" id="customerPhone" placeholder="Enter employee phone number" >
                                    </div>

                                    <!-- Email -->
                                    <div class="mb-3">
                                        <label for="customerEmail" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="customerEmail" placeholder="Enter employee email" >
                                    </div>

                                    <!-- Age -->
                                    <div class="mb-3">
                                        <label for="customerAge" class="form-label">Age</label>
                                        <input type="number" class="form-control" id="customerAge" placeholder="Enter employee age" >
                                    </div>

                                    <!-- Gender -->
                                    <div class="mb-3">
                                        <label for="customerGender" class="form-label">Gender</label>
                                        <select class="form-select" id="customerGender" >
                                            <option value="" disabled selected>Select gender</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>

                                    <!-- Insurance Company -->
                                    <div class="mb-3">
                                        <label for="insuranceCompany" class="form-label">Insurance Company</label>
                                        <input type="text" class="form-control" id="insuranceCompany" placeholder="Enter insurance company" >
                                    </div>

                                    <!-- User Photo -->
                                    <div class="mb-3">
                                        <label for="userPhoto" class="form-label">User Photo</label>
                                        <input type="file" class="form-control" id="userPhoto" accept="image/*">
                                        <!-- Display current photo if available -->
                                        <div id="currentPhoto">
                                            <img id="photoPreview" src="" alt="Current photo" style="max-width: 500px; max-height: 500px; margin-top: 10px;">  <!-- Increase size here -->
                                        </div>
                                    </div>

                                    <button type="submit" class="btn btn-info">Modify Employee</button>
                                </form>
                            `;

                            // Fetch customer data based on UserID input
                            document.getElementById('fetchCustomerBtn').addEventListener('click', function() {
                                const userID = document.getElementById('userIDInput').value;

                                // Validate input
                                if (!userID) {
                                    alert('Please enter a customer ID to search.');
                                    return;
                                }

                                // Fetch customer data from backend using the customer UserID
                                fetch('/get_customer_by_userid', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify({ userID: userID })
                                })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.customer) {
                                        // Populate form fields with customer data
                                        document.getElementById('customerName').value = data.customer.name;
                                        document.getElementById('customerAddress').value = data.customer.address;
                                        document.getElementById('customerPhone').value = data.customer.phone;
                                        document.getElementById('customerEmail').value = data.customer.email;
                                        document.getElementById('customerAge').value = data.customer.age;
                                        document.getElementById('customerGender').value = data.customer.gender;
                                        document.getElementById('insuranceCompany').value = data.customer.insurance_company;

                                        // Display the current customer photo if available
                                        if (data.customer.photo_url) {
                                            document.getElementById('photoPreview').src = data.customer.photo_url;
                                            document.getElementById('currentPhoto').style.display = 'block';
                                        } else {
                                            document.getElementById('currentPhoto').style.display = 'none';
                                        }

                                        // Disable the name field since it's not editable
                                        document.getElementById('customerName').disabled = true;
                                    } else {
                                        alert('Customer not found');
                                    }
                                })
                                .catch(error => {
                                    console.error('Error:', error);
                                    alert('There was an error fetching customer data.');
                                });
                            });

                            // Handle form submission for modifying customer data
                            document.getElementById('modifyCustomerForm').addEventListener('submit', function(event) {
                                event.preventDefault();

                                // Collect the form data
                                const updatedCustomerData = {
                                    userID: document.getElementById('userIDInput').value,  // Include the UserID
                                    name: document.getElementById('customerName').value,
                                    address: document.getElementById('customerAddress').value,
                                    phone: document.getElementById('customerPhone').value,
                                    email: document.getElementById('customerEmail').value,
                                    age: document.getElementById('customerAge').value,
                                    gender: document.getElementById('customerGender').value,
                                    insurance_company: document.getElementById('insuranceCompany').value,
                                    photo: document.getElementById('userPhoto').files[0] ? document.getElementById('userPhoto').files[0].name : ''
                                };

                                // Validate the form (ensure no field is empty)
                                if (!updatedCustomerData.userID || !updatedCustomerData.name || !updatedCustomerData.address || 
                                    !updatedCustomerData.phone || !updatedCustomerData.email || !updatedCustomerData.age || 
                                    !updatedCustomerData.gender || !updatedCustomerData.insurance_company) {
                                    
                                    // Show the error modal if validation fails
                                    showErrorModal('Error: All fields must be completed to modify successfully.');
                                    return;  // Prevent submission if validation fails
                                }

                                // Send the updated data to the backend
                                fetch('/modify_customer', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify(updatedCustomerData)
                                })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.message) {
                                        alert(data.message);
                                    } else {
                                        alert('Error: ' + data.error);
                                    }
                                })
                                .catch(error => {
                                    console.error('Error:', error);
                                    alert('There was an error modifying the customer data.');
                                });
                            });
                        });

                        // Listen for clicks on "Delete Customer Data"
                        document.getElementById('deleteCustomer').addEventListener('click', function () {
                            document.getElementById('customerDataContent').innerHTML = `
                                <form id="deleteCustomerForm">
                                    <h3>Deactivate Employee Data</h3>

                                    <!-- Customer ID (Input for searching) -->
                                    <div class="mb-3">
                                        <label for="userIDInput" class="form-label">Employee ID</label>
                                        <input type="text" class="form-control" id="userIDInput" placeholder="Enter employee ID" required>
                                        <button type="button" id="fetchCustomerBtn" class="btn btn-primary mt-3">Fetch Employee Data</button>
                                    </div>

                                    <!-- Display Customer Data -->
                                    <div id="customerDetails" style="display: none;">
                                        <div class="mb-3">
                                            <label for="customerName" class="form-label">Name</label>
                                            <input type="text" class="form-control" id="customerName" placeholder="Employee name" disabled>
                                        </div>
                                        <div class="mb-3">
                                            <label for="customerAddress" class="form-label">Address</label>
                                            <input type="text" class="form-control" id="customerAddress" placeholder="Employee address" disabled>
                                        </div>
                                        <div class="mb-3">
                                            <label for="customerPhone" class="form-label">Phone</label>
                                            <input type="tel" class="form-control" id="customerPhone" placeholder="Employee phone" disabled>
                                        </div>
                                        <div class="mb-3">
                                            <label for="customerEmail" class="form-label">Email</label>
                                            <input type="email" class="form-control" id="customerEmail" placeholder="Employee email" disabled>
                                        </div>
                                        <!-- Add more fields as needed for confirmation -->

                                        <!-- Deactivate Button -->
                                        <button type="button" class="btn btn-danger mt-3" id="deactivateCustomerBtn">Deactivate Employee</button>
                                    </div>
                                </form>
                            `;

                            // Fetch customer data based on UserID input
                            document.getElementById('fetchCustomerBtn').addEventListener('click', function () {
                                const userID = document.getElementById('userIDInput').value;

                                // Validate input
                                if (!userID) {
                                    alert('Please enter a customer ID to search.');
                                    return;
                                }

                                // Fetch customer data from backend using the customer UserID
                                fetch('/get_customer_by_userid', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify({ userID: userID })
                                })
                                    .then(response => response.json())
                                    .then(data => {
                                        if (data.customer) {
                                            // Populate form fields with customer data for confirmation
                                            document.getElementById('customerName').value = data.customer.name;
                                            document.getElementById('customerAddress').value = data.customer.address;
                                            document.getElementById('customerPhone').value = data.customer.phone;
                                            document.getElementById('customerEmail').value = data.customer.email;

                                            // Show customer details
                                            document.getElementById('customerDetails').style.display = 'block';
                                        } else {
                                            alert('Customer not found');
                                        }
                                    })
                                    .catch(error => {
                                        console.error('Error:', error);
                                        alert('There was an error fetching customer data.');
                                    });
                            });

                            // Handle deactivation of customer data
                            document.getElementById('deactivateCustomerBtn').addEventListener('click', function () {
                                const userID = document.getElementById('userIDInput').value;

                                // Show a confirmation modal before deactivating
                                showDeactivateModal(userID);
                            });

                            // Function to show the deactivate confirmation modal
                            function showDeactivateModal(userID) {
                                // Create the modal HTML structure
                                const modalHTML = `
                                    <div class="modal fade" id="deactivateModal" tabindex="-1" aria-labelledby="deactivateModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="deactivateModalLabel">Confirm Deactivation</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <p>Are you sure you want to deactivate this customer record?</p>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-light"  style="background-color: #f5f5f5;" data-bs-dismiss="modal">Cancel</button>
                                                    <button type="button" class="btn btn-danger" id="confirmDeactivateBtn">Deactivate</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `;

                                // Add the modal HTML to the body
                                document.body.insertAdjacentHTML('beforeend', modalHTML);

                                // Show the modal
                                const deactivateModal = new bootstrap.Modal(document.getElementById('deactivateModal'));
                                deactivateModal.show();

                                // Add event listener for confirm deactivate button
                                document.getElementById('confirmDeactivateBtn').addEventListener('click', function () {
                                    // Call the delete endpoint
                                    fetch('/delete_customer', {
                                        method: 'POST',
                                        headers: {
                                            'Content-Type': 'application/json'
                                        },
                                        body: JSON.stringify({ userID: userID })
                                    })
                                        .then(response => response.json())
                                        .then(data => {
                                            if (data.message) {
                                                alert(data.message);
                                                deactivateModal.hide(); // Close the modal
                                                document.getElementById('deleteCustomerForm').reset(); // Reset the form
                                                document.getElementById('customerDetails').style.display = 'none'; // Hide the customer details section
                                            } else {
                                                alert('Error: ' + data.error);
                                            }
                                        })
                                        .catch(error => {
                                            console.error('Error:', error);
                                            alert('There was an error deactivating the customer data.');
                                        });
                                });
                            }
                        });
                    </script>
                    <script>
                        // Listen for clicks on "Create New vehicle"
                        document.getElementById('createCar').addEventListener('click', function() {
                            document.getElementById('customerDataContent').innerHTML = `
                                <form id="createVehicleForm" style="margin-bottom: 75px;">
                                    <h3>Create New Vehicle</h3>
                    
                                    <!-- Make -->
                                    <div class="mb-3">
                                        <label for="vehicleMake" class="form-label">Make</label>
                                        <select class="form-select" id="vehicleMake">
                                            <option value="" disabled selected>Select make</option>
                                            <option value="Acura">Acura</option>
                                            <option value="Alfa Romeo">Alfa Romeo</option>
                                            <option value="Audi">Audi</option>
                                            <option value="BMW">BMW</option>
                                            <option value="Buick">Buick</option>
                                            <option value="Cadillac">Cadillac</option>
                                            <option value="Chevrolet">Chevrolet</option>
                                            <option value="Chrysler">Chrysler</option>
                                            <option value="Dodge">Dodge</option>
                                            <option value="Fiat">Fiat</option>
                                            <option value="Ford">Ford</option>
                                            <option value="Genesis">Genesis</option>
                                            <option value="GMC">GMC</option>
                                            <option value="Honda">Honda</option>
                                            <option value="Hyundai">Hyundai</option>
                                            <option value="Infiniti">Infiniti</option>
                                            <option value="Jaguar">Jaguar</option>
                                            <option value="Jeep">Jeep</option>
                                            <option value="Kia">Kia</option>
                                            <option value="Land Rover">Land Rover</option>
                                            <option value="Lexus">Lexus</option>
                                            <option value="Lincoln">Lincoln</option>
                                            <option value="Mazda">Mazda</option>
                                            <option value="Mercedes-Benz">Mercedes-Benz</option>
                                            <option value="Mini">Mini</option>
                                            <option value="Mitsubishi">Mitsubishi</option>
                                            <option value="Nissan">Nissan</option>
                                            <option value="Porsche">Porsche</option>
                                            <option value="Ram">Ram</option>
                                            <option value="Subaru">Subaru</option>
                                            <option value="Tesla">Tesla</option>
                                            <option value="Toyota">Toyota</option>
                                            <option value="Volkswagen">Volkswagen</option>
                                            <option value="Volvo">Volvo</option>
                                        </select>
                                    </div>
                    
                                    <!-- Model -->
                                    <div class="mb-3">
                                        <label for="vehicleModel" class="form-label">Model</label>
                                        <select class="form-select" id="vehicleModel">
                                            <option value="" disabled selected>Select model</option>
                                            <optgroup label="Acura">
                                                <option value="ILX">ILX</option>
                                                <option value="MDX">MDX</option>
                                                <option value="RDX">RDX</option>
                                                <option value="TLX">TLX</option>
                                                <option value="NSX">NSX</option>
                                            </optgroup>
                                            <optgroup label="Alfa Romeo">
                                                <option value="Giulia">Giulia</option>
                                                <option value="Stelvio">Stelvio</option>
                                                <option value="4C">4C</option>
                                                <option value="Tonale">Tonale</option>
                                            </optgroup>
                                            <optgroup label="Audi">
                                                <option value="A3">A3</option>
                                                <option value="A4">A4</option>
                                                <option value="A6">A6</option>
                                                <option value="A8">A8</option>
                                                <option value="Q3">Q3</option>
                                                <option value="Q5">Q5</option>
                                                <option value="Q7">Q7</option>
                                                <option value="Q8">Q8</option>
                                                <option value="e-tron">e-tron</option>
                                            </optgroup>
                                            <optgroup label="BMW">
                                                <option value="2 Series">2 Series</option>
                                                <option value="3 Series">3 Series</option>
                                                <option value="4 Series">4 Series</option>
                                                <option value="5 Series">5 Series</option>
                                                <option value="7 Series">7 Series</option>
                                                <option value="X1">X1</option>
                                                <option value="X3">X3</option>
                                                <option value="X5">X5</option>
                                                <option value="X7">X7</option>
                                                <option value="i3">i3</option>
                                                <option value="i8">i8</option>
                                            </optgroup>
                                            <optgroup label="Buick">
                                                <option value="Encore">Encore</option>
                                                <option value="Encore GX">Encore GX</option>
                                                <option value="Envision">Envision</option>
                                                <option value="Enclave">Enclave</option>
                                                <option value="Regal">Regal</option>
                                            </optgroup>
                                            <optgroup label="Cadillac">
                                                <option value="CT4">CT4</option>
                                                <option value="CT5">CT5</option>
                                                <option value="XT4">XT4</option>
                                                <option value="XT5">XT5</option>
                                                <option value="XT6">XT6</option>
                                                <option value="Escalade">Escalade</option>
                                            </optgroup>
                                            <optgroup label="Chevrolet">
                                                <option value="Silverado 1500">Silverado 1500</option>
                                                <option value="Silverado 2500HD">Silverado 2500HD</option>
                                                <option value="Equinox">Equinox</option>
                                                <option value="Traverse">Traverse</option>
                                                <option value="Blazer">Blazer</option>
                                                <option value="Malibu">Malibu</option>
                                                <option value="Tahoe">Tahoe</option>
                                                <option value="Suburban">Suburban</option>
                                                <option value="Camaro">Camaro</option>
                                                <option value="Corvette">Corvette</option>
                                            </optgroup>
                                            <optgroup label="Chrysler">
                                                <option value="300">300</option>
                                                <option value="Pacifica">Pacifica</option>
                                                <option value="Voyager">Voyager</option>
                                            </optgroup>
                                            <optgroup label="Dodge">
                                                <option value="Challenger">Challenger</option>
                                                <option value="Charger">Charger</option>
                                                <option value="Durango">Durango</option>
                                                <option value="Hornet">Hornet</option>
                                                <option value="Journey">Journey</option>
                                            </optgroup>
                                            <optgroup label="Ford">
                                                <option value="F-150">F-150</option>
                                                <option value="Ranger">Ranger</option>
                                                <option value="Maverick">Maverick</option>
                                                <option value="Explorer">Explorer</option>
                                                <option value="Edge">Edge</option>
                                                <option value="Escape">Escape</option>
                                                <option value="Mustang">Mustang</option>
                                                <option value="Bronco">Bronco</option>
                                                <option value="Bronco Sport">Bronco Sport</option>
                                            </optgroup>
                                            <optgroup label="GMC">
                                                <option value="Sierra 1500">Sierra 1500</option>
                                                <option value="Sierra 2500HD">Sierra 2500HD</option>
                                                <option value="Terrain">Terrain</option>
                                                <option value="Acadia">Acadia</option>
                                                <option value="Yukon">Yukon</option>
                                                <option value="Canyon">Canyon</option>
                                            </optgroup>
                                            <optgroup label="Honda">
                                                <option value="Accord">Accord</option>
                                                <option value="Civic">Civic</option>
                                                <option value="HR-V">HR-V</option>
                                                <option value="CR-V">CR-V</option>
                                                <option value="Passport">Passport</option>
                                                <option value="Pilot">Pilot</option>
                                                <option value="Ridgeline">Ridgeline</option>
                                            </optgroup>
                                            <optgroup label="Toyota">
                                                <option value="Corolla">Corolla</option>
                                                <option value="Camry">Camry</option>
                                                <option value="RAV4">RAV4</option>
                                                <option value="Highlander">Highlander</option>
                                                <option value="4Runner">4Runner</option>
                                                <option value="Tacoma">Tacoma</option>
                                                <option value="Tundra">Tundra</option>
                                                <option value="Sienna">Sienna</option>
                                            </optgroup>
                                            <optgroup label="Tesla">
                                                <option value="Model S">Model S</option>
                                                <option value="Model 3">Model 3</option>
                                                <option value="Model X">Model X</option>
                                                <option value="Model Y">Model Y</option>
                                                <option value="Cybertruck">Cybertruck</option>
                                            </optgroup>
                                            <optgroup label="Volkswagen">
                                                <option value="Golf">Golf</option>
                                                <option value="Jetta">Jetta</option>
                                                <option value="Passat">Passat</option>
                                                <option value="Atlas">Atlas</option>
                                                <option value="Tiguan">Tiguan</option>
                                                <option value="ID.4">ID.4</option>
                                            </optgroup>
                                            <optgroup label="Volvo">
                                                <option value="XC40">XC40</option>
                                                <option value="XC60">XC60</option>
                                                <option value="XC90">XC90</option>
                                                <option value="S60">S60</option>
                                                <option value="S90">S90</option>
                                            </optgroup>
                                        </select>
                                    </div>
                    
                                    <!-- Year -->
                                    <div class="mb-3">
                                        <label for="vehicleYear" class="form-label">Year</label>
                                        <input type="number" id="vehicleYear" min="1995" max="2025" placeholder="Year" >
                                    </div>
                    
                                    <!-- Type -->
                                    <div class="mb-3">
                                        <label for="vehicleType" class="form-label">Type</label>
                                        <select class="form-select" id="vehicleType">
                                            <option value="" disabled selected>Select type</option>
                                            <option value="Sedan">Sedan</option>
                                            <option value="SUV">SUV</option>
                                            <option value="Coupe">Coupe</option>
                                            <option value="Truck">Truck</option>
                                        </select>
                                    </div>
                    
                                    <!-- Mileage -->
                                    <div class="mb-3">
                                        <label for="vehicleMile" class="form-label">Mileage</label>
                                        <input type="number" class="form-control" id="vehicleMile" min="0" placeholder="Enter vehicle mileage" >
                                    </div>
                    
                                    <!-- Transmission -->
                                    <div class="mb-3">
                                        <label for="vehicleTrans" class="form-label">Transmission</label>
                                        <select class="form-select" id="vehicleTrans" >
                                            <option value="" disabled selected>Select transmission</option>
                                            <option value="Automatic">Automatic</option>
                                            <option value="Manual">Manual</option>
                                        </select>
                                    </div>
                    
                                    <!-- Number of Doors -->
                                    <div class="mb-3">
                                        <label for="vehicleDoor" class="form-label">Number of Doors</label>
                                        <select class="form-select" id="vehicleDoor" >
                                            <option value="" disabled selected>Select no. of Doors</option>
                                            <option value="4">4</option>
                                            <option value="2">2</option>
                                        </select>
                                    </div>
                    
                                    <!-- Repair Status -->
                                    <div class="mb-3">
                                        <label for="vehicleStat" class="form-label">Vehicle Status</label>
                                        <select class="form-select" id="vehicleStat" >
                                            <option value="" disabled selected>Select vehicle status</option>
                                            <option value="Operational">Operational</option>
                                            <option value="In Repair">In Repair</option>
                                        </select>
                                    </div>
                    
                                    <!-- Availability -->
                                    <div class="mb-3">
                                        <label for="vehicleAvail" class="form-label">Availability</label>
                                        <select class="form-select" id="vehicleAvail" >
                                            <option value="" disabled selected>Select vehicle availability</option>
                                            <option value="Yes">Yes</option>
                                            <option value="No">No</option>
                                        </select>
                                    </div>
                    
                                    <!-- Vehicle Photo -->
                                    <div class="mb-3">
                                        <label for="vehiclePhoto" class="form-label">Vehicle Photo</label>
                                        <input type="text" class="form-control" id="vehiclePhoto">
                                    </div>
                    
                                    <!-- LocationID -->
                                    <div class="mb-3">
                                        <label for="vehicleLoc" class="form-label">Location ID</label>
                                        <select id="vehicleLoc" class="form-select" style="margin-top: 10px;">
                                            <option value="0" disabled selected>Select Vehicle Location</option>
                                            {{ locationOptions }}
                                        </select>
                                    </div>
                    
                                    <!-- Key Features -->
                                    <div class="mb-3">
                                        <label for="vehicleKey" class="form-label">Features</label>
                                        <textarea class="form-control" id="vehicleKey" placeholder="Enter vehicle Key Features" rows="3" ></textarea>
                                    </div>
                    
                                    <!-- Description -->
                                    <div class="mb-3">
                                        <label for="vehicleDesc" class="form-label">Description</label>
                                        <textarea class="form-control" id="vehicleDesc" placeholder="Enter vehicle Description" rows="3" ></textarea>
                                    </div>
                    
                                    <!-- Drivetrain -->
                                    <div class="mb-3">
                                        <label for="vehicleDrive" class="form-label">Drivetrain</label>
                                        <select class="form-select" id="vehicleDrive" >
                                            <option value="" disabled selected>Select vehicle Drivetrain</option>
                                            <option value="4WD">4WD</option>
                                            <option value="RWD">RWD</option>
                                            <option value="AWD">AWD</option>
                                            <option value="FWD">FWD</option>
                                        </select>
                                    </div>
                    
                                    <button type="submit" class="btn btn-primary">Add Vehicle</button>
                                </form>
                            `;
                    
                        // Add event listener for form submission
                            document.getElementById('createVehicleForm').addEventListener('submit', function(event) {
                                event.preventDefault();  // Prevent default form submission
                    
                                // Collect form data
                                const vehicleData = new FormData();
                                vehicleData.append('make', document.getElementById('vehicleMake').value);
                                vehicleData.append('model', document.getElementById('vehicleModel').value);
                                vehicleData.append('year', document.getElementById('vehicleYear').value);
                                vehicleData.append('type', document.getElementById('vehicleType').value);
                                vehicleData.append('mileage', document.getElementById('vehicleMile').value);
                                vehicleData.append('transmission', document.getElementById('vehicleTrans').value);
                                vehicleData.append('numdoors', document.getElementById('vehicleDoor').value);
                                vehicleData.append('repairstatus', document.getElementById('vehicleStat').value);
                                vehicleData.append('available', document.getElementById('vehicleAvail').value);
                                vehicleData.append('locationid', document.getElementById('vehicleLoc').value);
                                vehicleData.append('keyfeatures', document.getElementById('vehicleKey').value);
                                vehicleData.append('description', document.getElementById('vehicleDesc').value);
                                vehicleData.append('drivetrain', document.getElementById('vehicleDrive').value);
                                vehicleData.append('photos', document.getElementById('vehiclePhoto').value);
                    
                                // Validate the form (ensure no field is empty)
                                if (!vehicleData.get('make') || !vehicleData.get('model') || !vehicleData.get('year') ||
                                    !vehicleData.get('type') || !vehicleData.get('mileage') || !vehicleData.get('transmission') ||
                                    !vehicleData.get('numdoors') || !vehicleData.get('repairstatus') || !vehicleData.get('available') || !vehicleData.get('photos')
                                    || !vehicleData.get('locationid') || !vehicleData.get('keyfeatures') || !vehicleData.get('description') || !vehicleData.get('drivetrain')) {
                                    // Show the error modal if validation fails
                                    showErrorModal('Error: All fields must be completed to modify successfully.');
                                    return;  // Prevent submission if validation fails
                                }
                                // Send the form data to the Flask backend using fetch with FormData
                                fetch('/create_vehicle', {
                                    method: 'POST',
                                    body: vehicleData  // Send the FormData object with the file included
                                })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.message) {
                                        alert(data.message);  // Show success message
                                        // Reset form after successful submission
                                        document.getElementById('createVehicleForm').reset();
                                    } else {
                                        alert('Error: ' + data.error);  // Show error message
                                    }
                                })
                                .catch(error => {
                                    console.error('Error:', error);
                                    alert('There was an error adding a vehicle.');
                                });
                            });
                        });
                    
                    
                         // Listen for clicks on "Modify vehicle Data"
                        document.getElementById('modifyCar').addEventListener('click', function() {
                            document.getElementById('customerDataContent').innerHTML = `
                                <form id="modifyvehicleForm" style="margin-bottom: 75px;">
                                    <h3>Modify vehicle Data</h3>
                    
                                    <!-- vehicle ID (Input for searching) -->
                                    <div class="mb-3">
                                        <label for="vehicleIDInput" class="form-label">Vehicle ID</label>
                                        <input type="text" class="form-control" id="vehicleIDInput" placeholder="Enter vehicle ID" >
                                        <button type="button" id="fetchvehicleBtn" class="btn btn-primary mt-3">Fetch vehicle Data</button>
                                    </div>
                    
                                    <!-- Make -->
                                    <div class="mb-3">
                                        <label for="vehicleMake" class="form-label">Make</label>
                                        <select class="form-select" id="vehicleMake">
                                            <option value="" disabled selected>Select make</option>
                                            <option value="Acura">Acura</option>
                                            <option value="Alfa Romeo">Alfa Romeo</option>
                                            <option value="Audi">Audi</option>
                                            <option value="BMW">BMW</option>
                                            <option value="Buick">Buick</option>
                                            <option value="Cadillac">Cadillac</option>
                                            <option value="Chevrolet">Chevrolet</option>
                                            <option value="Chrysler">Chrysler</option>
                                            <option value="Dodge">Dodge</option>
                                            <option value="Fiat">Fiat</option>
                                            <option value="Ford">Ford</option>
                                            <option value="Genesis">Genesis</option>
                                            <option value="GMC">GMC</option>
                                            <option value="Honda">Honda</option>
                                            <option value="Hyundai">Hyundai</option>
                                            <option value="Infiniti">Infiniti</option>
                                            <option value="Jaguar">Jaguar</option>
                                            <option value="Jeep">Jeep</option>
                                            <option value="Kia">Kia</option>
                                            <option value="Land Rover">Land Rover</option>
                                            <option value="Lexus">Lexus</option>
                                            <option value="Lincoln">Lincoln</option>
                                            <option value="Mazda">Mazda</option>
                                            <option value="Mercedes-Benz">Mercedes-Benz</option>
                                            <option value="Mini">Mini</option>
                                            <option value="Mitsubishi">Mitsubishi</option>
                                            <option value="Nissan">Nissan</option>
                                            <option value="Porsche">Porsche</option>
                                            <option value="Ram">Ram</option>
                                            <option value="Subaru">Subaru</option>
                                            <option value="Tesla">Tesla</option>
                                            <option value="Toyota">Toyota</option>
                                            <option value="Volkswagen">Volkswagen</option>
                                            <option value="Volvo">Volvo</option>
                                        </select>
                                    </div>
                    
                                    <!-- Model -->
                                    <div class="mb-3">
                                        <label for="vehicleModel" class="form-label">Model</label>
                                        <select class="form-select" id="vehicleModel">
                                            <option value="" disabled selected>Select model</option>
                                            <optgroup label="Acura">
                                                <option value="ILX">ILX</option>
                                                <option value="MDX">MDX</option>
                                                <option value="RDX">RDX</option>
                                                <option value="TLX">TLX</option>
                                                <option value="NSX">NSX</option>
                                            </optgroup>
                                            <optgroup label="Alfa Romeo">
                                                <option value="Giulia">Giulia</option>
                                                <option value="Stelvio">Stelvio</option>
                                                <option value="4C">4C</option>
                                                <option value="Tonale">Tonale</option>
                                            </optgroup>
                                            <optgroup label="Audi">
                                                <option value="A3">A3</option>
                                                <option value="A4">A4</option>
                                                <option value="A6">A6</option>
                                                <option value="A8">A8</option>
                                                <option value="Q3">Q3</option>
                                                <option value="Q5">Q5</option>
                                                <option value="Q7">Q7</option>
                                                <option value="Q8">Q8</option>
                                                <option value="e-tron">e-tron</option>
                                            </optgroup>
                                            <optgroup label="BMW">
                                                <option value="2 Series">2 Series</option>
                                                <option value="3 Series">3 Series</option>
                                                <option value="4 Series">4 Series</option>
                                                <option value="5 Series">5 Series</option>
                                                <option value="7 Series">7 Series</option>
                                                <option value="X1">X1</option>
                                                <option value="X3">X3</option>
                                                <option value="X5">X5</option>
                                                <option value="X7">X7</option>
                                                <option value="i3">i3</option>
                                                <option value="i8">i8</option>
                                            </optgroup>
                                            <optgroup label="Buick">
                                                <option value="Encore">Encore</option>
                                                <option value="Encore GX">Encore GX</option>
                                                <option value="Envision">Envision</option>
                                                <option value="Enclave">Enclave</option>
                                                <option value="Regal">Regal</option>
                                            </optgroup>
                                            <optgroup label="Cadillac">
                                                <option value="CT4">CT4</option>
                                                <option value="CT5">CT5</option>
                                                <option value="XT4">XT4</option>
                                                <option value="XT5">XT5</option>
                                                <option value="XT6">XT6</option>
                                                <option value="Escalade">Escalade</option>
                                            </optgroup>
                                            <optgroup label="Chevrolet">
                                                <option value="Silverado 1500">Silverado 1500</option>
                                                <option value="Silverado 2500HD">Silverado 2500HD</option>
                                                <option value="Equinox">Equinox</option>
                                                <option value="Traverse">Traverse</option>
                                                <option value="Blazer">Blazer</option>
                                                <option value="Malibu">Malibu</option>
                                                <option value="Tahoe">Tahoe</option>
                                                <option value="Suburban">Suburban</option>
                                                <option value="Camaro">Camaro</option>
                                                <option value="Corvette">Corvette</option>
                                            </optgroup>
                                            <optgroup label="Chrysler">
                                                <option value="300">300</option>
                                                <option value="Pacifica">Pacifica</option>
                                                <option value="Voyager">Voyager</option>
                                            </optgroup>
                                            <optgroup label="Dodge">
                                                <option value="Challenger">Challenger</option>
                                                <option value="Charger">Charger</option>
                                                <option value="Durango">Durango</option>
                                                <option value="Hornet">Hornet</option>
                                                <option value="Journey">Journey</option>
                                            </optgroup>
                                            <optgroup label="Ford">
                                                <option value="F-150">F-150</option>
                                                <option value="Ranger">Ranger</option>
                                                <option value="Maverick">Maverick</option>
                                                <option value="Explorer">Explorer</option>
                                                <option value="Edge">Edge</option>
                                                <option value="Escape">Escape</option>
                                                <option value="Mustang">Mustang</option>
                                                <option value="Bronco">Bronco</option>
                                                <option value="Bronco Sport">Bronco Sport</option>
                                            </optgroup>
                                            <optgroup label="GMC">
                                                <option value="Sierra 1500">Sierra 1500</option>
                                                <option value="Sierra 2500HD">Sierra 2500HD</option>
                                                <option value="Terrain">Terrain</option>
                                                <option value="Acadia">Acadia</option>
                                                <option value="Yukon">Yukon</option>
                                                <option value="Canyon">Canyon</option>
                                            </optgroup>
                                            <optgroup label="Honda">
                                                <option value="Accord">Accord</option>
                                                <option value="Civic">Civic</option>
                                                <option value="HR-V">HR-V</option>
                                                <option value="CR-V">CR-V</option>
                                                <option value="Passport">Passport</option>
                                                <option value="Pilot">Pilot</option>
                                                <option value="Ridgeline">Ridgeline</option>
                                            </optgroup>
                                            <optgroup label="Toyota">
                                                <option value="Corolla">Corolla</option>
                                                <option value="Camry">Camry</option>
                                                <option value="RAV4">RAV4</option>
                                                <option value="Highlander">Highlander</option>
                                                <option value="4Runner">4Runner</option>
                                                <option value="Tacoma">Tacoma</option>
                                                <option value="Tundra">Tundra</option>
                                                <option value="Sienna">Sienna</option>
                                            </optgroup>
                                            <optgroup label="Tesla">
                                                <option value="Model S">Model S</option>
                                                <option value="Model 3">Model 3</option>
                                                <option value="Model X">Model X</option>
                                                <option value="Model Y">Model Y</option>
                                                <option value="Cybertruck">Cybertruck</option>
                                            </optgroup>
                                            <optgroup label="Volkswagen">
                                                <option value="Golf">Golf</option>
                                                <option value="Jetta">Jetta</option>
                                                <option value="Passat">Passat</option>
                                                <option value="Atlas">Atlas</option>
                                                <option value="Tiguan">Tiguan</option>
                                                <option value="ID.4">ID.4</option>
                                            </optgroup>
                                            <optgroup label="Volvo">
                                                <option value="XC40">XC40</option>
                                                <option value="XC60">XC60</option>
                                                <option value="XC90">XC90</option>
                                                <option value="S60">S60</option>
                                                <option value="S90">S90</option>
                                            </optgroup>
                                        </select>
                                    </div>
                    
                                    <!-- Year -->
                                    <div class="mb-3">
                                        <label for="vehicleYear" class="form-label">Year</label>
                                        <input type="number" id="vehicleYear" min="1995" max="2025" placeholder="Enter vehicle year" >
                                    </div>
                    
                                    <!-- Type -->
                                    <div class="mb-3">
                                        <label for="vehicleType" class="form-label">Type</label>
                                        <select class="form-select" id="vehicleType">
                                            <option value="" disabled selected>Select type</option>
                                            <option value="Sedan">Sedan</option>
                                            <option value="SUV">SUV</option>
                                            <option value="Coupe">Coupe</option>
                                            <option value="Truck">Truck</option>
                                        </select>
                                    </div>
                    
                                    <!-- Mileage -->
                                    <div class="mb-3">
                                        <label for="vehicleMile" class="form-label">Mileage</label>
                                        <input type="number" class="form-control" id="vehicleMile" min="0" placeholder="Enter vehicle mileage" >
                                    </div>
                    
                                    <!-- Transmission -->
                                    <div class="mb-3">
                                        <label for="vehicleTrans" class="form-label">Transmission</label>
                                        <select class="form-select" id="vehicleTrans" >
                                            <option value="" disabled selected>Select transmission</option>
                                            <option value="Automatic">Automatic</option>
                                            <option value="Manual">Manual</option>
                                        </select>
                                    </div>
                    
                                    <!-- Number of Doors -->
                                    <div class="mb-3">
                                        <label for="vehicleDoor" class="form-label">Number of Doors</label>
                                        <select class="form-select" id="vehicleDoor" >
                                            <option value="" disabled selected>Select no. of Doors</option>
                                            <option value="4">4</option>
                                            <option value="2">2</option>
                                        </select>
                                    </div>
                    
                                    <!-- Repair Status -->
                                    <div class="mb-3">
                                        <label for="vehicleStat" class="form-label">Vehicle Status</label>
                                        <select class="form-select" id="vehicleStat" >
                                            <option value="" disabled selected>Select vehicle status</option>
                                            <option value="Operational">Operational</option>
                                            <option value="In Repair">In Repair</option>
                                        </select>
                                    </div>
                    
                                    <!-- Availability -->
                                    <div class="mb-3">
                                        <label for="vehicleAvail" class="form-label">Availability</label>
                                        <select class="form-select" id="vehicleAvail" >
                                            <option value="" disabled selected>Select vehicle availability</option>
                                            <option value="Yes">Yes</option>
                                            <option value="No">No</option>
                                        </select>
                                    </div>
                    
                                    <!-- Vehicle Photo -->
                                    <div class="mb-3">
                                        <label for="vehiclePhoto" class="form-label">Vehicle Photo</label>
                                        <input type="text" class="form-control" id="vehiclePhoto">
                                    </div>
                    
                                    <!-- LocationID -->
                                    <div class="mb-3">
                                        <label for="vehicleLoc" class="form-label">Location ID</label>
                                        <input type="number" id="vehicleLoc" min="0" placeholder="Enter vehicle Location ID" >
                                    </div>
                                    
                                    <!-- ServiceID -->
                                    <div class="mb-3">
                                        <label for="vehicleSer" class="form-label">Service ID</label>
                                        <input type="number" id="vehicleSer" min="0" placeholder="Enter vehicle Service ID" readonly disabled>
                                    </div>
                    
                                    <!-- Key Features -->
                                    <div class="mb-3">
                                        <label for="vehicleKey" class="form-label">Features</label>
                                        <textarea class="form-control" id="vehicleKey" placeholder="Enter vehicle Key Features" rows="3" ></textarea>
                                    </div>
                    
                                    <!-- Description -->
                                    <div class="mb-3">
                                        <label for="vehicleDesc" class="form-label">Description</label>
                                        <textarea class="form-control" id="vehicleDesc" placeholder="Enter vehicle Description" rows="3" ></textarea>
                                    </div>
                    
                                    <!-- Drivetrain -->
                                    <div class="mb-3">
                                        <label for="vehicleDrive" class="form-label">Drivetrain</label>
                                        <select class="form-select" id="vehicleDrive" >
                                            <option value="" disabled selected>Select vehicle Drivetrain</option>
                                            <option value="4WD">4WD</option>
                                            <option value="RWD">RWD</option>
                                            <option value="AWD">AWD</option>
                                            <option value="FWD">FWD</option>
                                        </select>
                                    </div>
                    
                                    <button type="submit" class="btn btn-info">Modify vehicle</button>
                                </form>
                            `;
                    
                            // Fetch vehicle data based on UserID input
                            document.getElementById('fetchvehicleBtn').addEventListener('click', function() {
                                const vehicleID = document.getElementById('vehicleIDInput').value;
                    
                                // Validate input
                                if (!vehicleID) {
                                    alert('Please enter a vehicle ID to search.');
                                    return;
                                }
                    
                                // Fetch vehicle data from backend using the vehicle UserID
                                fetch('/get_vehicle_by_vehicleid', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify({ vehicleID: vehicleID })
                                })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.vehicle) {
                                        // Populate form fields with vehicle data
                                        document.getElementById('vehicleMake').value = data.vehicle.make;
                                        document.getElementById('vehicleModel').value = data.vehicle.model;
                                        document.getElementById('vehicleYear').value = data.vehicle.year;
                                        document.getElementById('vehicleType').value = data.vehicle.type;
                                        document.getElementById('vehicleMile').value = data.vehicle.mileage;
                                        document.getElementById('vehicleTrans').value = data.vehicle.transmission;
                                        document.getElementById('vehicleDoor').value = data.vehicle.numdoors;
                                        document.getElementById('vehicleStat').value = data.vehicle.repairstatus;
                                        document.getElementById('vehicleAvail').value = data.vehicle.available;
                                        document.getElementById('vehiclePhoto').value = data.vehicle.photos;
                                        document.getElementById('vehicleLoc').value = data.vehicle.locationid;
                                        document.getElementById('vehicleSer').value = data.vehicle.serviceid;
                                        document.getElementById('vehicleKey').value = data.vehicle.keyfeatures;
                                        document.getElementById('vehicleDesc').value = data.vehicle.description;
                                        document.getElementById('vehicleDrive').value = data.vehicle.drivetrain;
        
                                    } else {
                                        alert('vehicle not found');
                                    }
                                })
                                .catch(error => {
                                    console.error('Error:', error);
                                    alert('There was an error fetching vehicle data.');
                                });
                            });
                    
                            // Handle form submission for modifying vehicle data
                            document.getElementById('modifyvehicleForm').addEventListener('submit', function(event) {
                                event.preventDefault();
                    
                                // Collect the form data
                                const updatedvehicleData = {
                                    vehicleID: document.getElementById('vehicleIDInput').value,  // Include the vehicleID
                                    make: document.getElementById('vehicleMake').value,
                                    model: document.getElementById('vehicleModel').value,
                                    year: document.getElementById('vehicleYear').value,
                                    type: document.getElementById('vehicleType').value,
                                    mileage: document.getElementById('vehicleMile').value,
                                    transmission: document.getElementById('vehicleTrans').value,
                                    numdoors: document.getElementById('vehicleDoor').value,
                                    repairstatus: document.getElementById('vehicleStat').value,
                                    available: document.getElementById('vehicleAvail').value,
                                    photo: document.getElementById('vehiclePhoto').value,
                                    locationid: document.getElementById('vehicleLoc').value,
                                    serviceid: document.getElementById('vehicleSer').value,
                                    keyfeatures: document.getElementById('vehicleKey').value,
                                    description: document.getElementById('vehicleDesc').value,
                                    drivetrain: document.getElementById('vehicleDrive').value,
                                };
                    
                                // Validate the form (ensure no field is empty)
                                if (!updatedvehicleData.vehicleID || !updatedvehicleData.make || !updatedvehicleData.model || 
                                    !updatedvehicleData.year || !updatedvehicleData.type || !updatedvehicleData.mileage || 
                                    !updatedvehicleData.transmission || !updatedvehicleData.numdoors || !updatedvehicleData.repairstatus || !updatedvehicleData.available || 
                                    !updatedvehicleData.photo || !updatedvehicleData.locationid || !updatedvehicleData.serviceid || 
                                    !updatedvehicleData.keyfeatures || !updatedvehicleData.description || !updatedvehicleData.drivetrain) {
                                    // Show the error modal if validation fails
                                    showErrorModal('Error: All fields must be completed to modify successfully.');
                                    return;  // Prevent submission if validation fails
                                }
                    
                                // Send the updated data to the backend
                                fetch('/modify_vehicle', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify(updatedvehicleData)
                                })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.message) {
                                        alert(data.message);
                                    } else {
                                        alert('Error: ' + data.error);
                                    }
                                })
                                .catch(error => {
                                    console.error('Error:', error);
                                    alert('There was an error modifying the vehicle data.');
                                });
                            });
                        });
                    
                        // Listen for clicks on "Delete vehicle Data"
                        document.getElementById('deleteCar').addEventListener('click', function () {
                            document.getElementById('customerDataContent').innerHTML = `
                                <form id="deletevehicleForm">
                                    <h3>Deactivate vehicle Data</h3>
                    
                                    <!-- vehicle ID (Input for searching) -->
                                    <div class="mb-3">
                                        <label for="vehicleIDInput" class="form-label">Vehicle ID</label>
                                        <input type="text" class="form-control" id="vehicleIDInput" placeholder="Enter vehicle ID" required>
                                        <button type="button" id="fetchvehicleBtn" class="btn btn-primary mt-3">Fetch vehicle Data</button>
                                    </div>
                    
                                    <!-- Display vehicle Data -->
                                    <div id="vehicleDetails" style="display: none;">
                                        <div class="mb-3">
                                            <label for="vehicleMake" class="form-label">Make</label>
                                            <input type="text" class="form-control" id="vehicleMake" placeholder="Vehicle make" disabled>
                                        </div>
                                        <div class="mb-3">
                                            <label for="vehicleModel" class="form-label">Model</label>
                                            <input type="text" class="form-control" id="vehicleModel" placeholder="Vehicle model" disabled>
                                        </div>

                                        <!-- Add more fields as needed for confirmation -->
                    
                                        <!-- Deactivate Button -->
                                        <button type="button" class="btn btn-danger mt-3" id="deactivatevehicleBtn">Deactivate vehicle</button>
                                    </div>
                                </form>
                            `;
                    
                            // Fetch vehicle data based on UserID input
                            document.getElementById('fetchvehicleBtn').addEventListener('click', function () {
                                const vehicleID = document.getElementById('vehicleIDInput').value;
                                console.log(vehicleID);
                                // Validate input
                                if (!vehicleID) {
                                    alert('Please enter a vehicle ID to search.');
                                    return;
                                }
                    
                                // Fetch vehicle data from backend using the vehicle UserID
                                fetch('/get_vehicle_by_vehicleid', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify({ vehicleID: vehicleID })
                                })
                                    .then(response => response.json())
                                    .then(data => {
                                        if (data.vehicle) {
                                            // Populate form fields with vehicle data for confirmation
                                            document.getElementById('vehicleMake').value = data.vehicle.make;
                                            document.getElementById('vehicleModel').value = data.vehicle.model;

                                            // Remove if fields above are added

                                          //document.getElementById('vehicleYear').value = data.vehicle.year;
                                          //document.getElementById('vehicleType').value = data.vehicle.type;
                                          //document.getElementById('vehicleMile').value = data.vehicle.mileage;
                                          //document.getElementById('vehicleTrans').value = data.vehicle.transmission;
                                          //document.getElementById('vehicleDoor').value = data.vehicle.numdoors;
                                          //document.getElementById('vehicleStat').value = data.vehicle.repairstatus;
                                          //document.getElementById('vehicleAvail').value = data.vehicle.available;
                                          //document.getElementById('vehiclePhoto').value = data.vehicle.photos;
                                          //document.getElementById('vehicleLoc').value = data.vehicle.locationid;
                                          //document.getElementById('vehicleSer').value = data.vehicle.serviceid;
                                          //document.getElementById('vehicleKey').value = data.vehicle.keyfeatures;
                                          //document.getElementById('vehicleDesc').value = data.vehicle.description;
                                          //document.getElementById('vehicleDrive').value = data.vehicle.drivetrain;

                                            // Show vehicle details
                                            document.getElementById('vehicleDetails').style.display = 'block';
                                        } else {
                                            alert('vehicle not found');
                                        }
                                    })
                                    .catch(error => {
                                        console.error('Error:', error);
                                        alert('There was an error fetching vehicle data.');
                                    });
                            });
                    
                            // Handle deactivation of vehicle data
                            document.getElementById('deactivatevehicleBtn').addEventListener('click', function () {
                                const vehicleID = document.getElementById('vehicleIDInput').value;
                    
                                // Show a confirmation modal before deactivating
                                showDeactivateModal(vehicleID);
                            });
                    
                            // Function to show the deactivate confirmation modal
                            function showDeactivateModal(vehicleID) {
                                // Create the modal HTML structure
                                const modalHTML = `
                                    <div class="modal fade" id="deactivateModal" tabindex="-1" aria-labelledby="deactivateModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="deactivateModalLabel">Confirm Deactivation</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <p>Are you sure you want to deactivate this vehicle record?</p>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-light"  style="background-color: #f5f5f5;" data-bs-dismiss="modal">Cancel</button>
                                                    <button type="button" class="btn btn-danger" id="confirmDeactivateBtn">Deactivate</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `;
                    
                                // Add the modal HTML to the body
                                document.body.insertAdjacentHTML('beforeend', modalHTML);
                    
                                // Show the modal
                                const deactivateModal = new bootstrap.Modal(document.getElementById('deactivateModal'));
                                deactivateModal.show();
                    
                                // Add event listener for confirm deactivate button
                                document.getElementById('confirmDeactivateBtn').addEventListener('click', function () {
                                    // Call the delete endpoint
                                    fetch('/delete_vehicle', {
                                        method: 'POST',
                                        headers: {
                                            'Content-Type': 'application/json'
                                        },
                                        body: JSON.stringify({ vehicleID: vehicleID })
                                    })
                                        .then(response => response.json())
                                        .then(data => {
                                            if (data.message) {
                                                alert(data.message);
                                                deactivateModal.hide(); // Close the modal
                                                document.getElementById('deletevehicleForm').reset(); // Reset the form
                                                document.getElementById('vehicleDetails').style.display = 'none'; // Hide the vehicle details section
                                            } else {
                                                alert('Error: ' + data.error);
                                            }
                                        })
                                        .catch(error => {
                                            console.error('Error:', error);
                                            alert('There was an error deactivating the vehicle data.');
                                        });
                                });
                            }
                        });
                    </script>
                </div>
            </div>
        </div>
    </section>
    <footer class="bg-primary-gradient" style="position: fixed; left: 0;bottom: 0;color: rgba(255,255,255,0);text-align: center;width: 100%; max-height:100px;">
        <div class="container py-4 py-lg-5" style="--bs-secondary: #A599B5;--bs-secondary-rgb: 165,153,181;">
          <div class="text-muted d-flex justify-content-between align-items-center pt-3">
            <p class="mb-0" style="margin: auto;">Copyright © 2024 Car Rental</p>
          </div>
        </div>
      </footer>
      <script src="{{ url_for('static', filename='bootstrap/js/bootstrap.min.js')}}"></script>
      <script src="{{ url_for('static', filename='js/bs-init.js')}}"></script>
      <script src="{{ url_for('static', filename='/js/bold-and-bright.js')}}"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.2/js/widgets/widget-storage.min.js')}}"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js')}}"></script>
      <script src="{{ url_for('static', filename='js/Ludens---Index-v2-with-Backend--Frontend-Filters-Ludens---1-Index-Table-with-Search--Sort-Filters-v20-1.js')}}"></script>
      <script src="{{ url_for('static', filename='js/Ludens---Index-v2-with-Backend--Frontend-Filters-Ludens---1-Index-Table-with-Search--Sort-Filters-v20.js')}}"></script>
      <script src="{{ url_for('static', filename='js/Simple-Slider-swiper-bundle.min.js')}}"></script>
      <script src="{{ url_for('static', filename='js/Simple-Slider.js')}}"></script>
      <script src="{{ url_for('static', filename='js/theme.js')}}"></script>
    </body>
    
    </html>
